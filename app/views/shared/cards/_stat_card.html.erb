<!-- _stat_card.html.erb -->
<div
  class="
    bg-white rounded-lg shadow p-6 flex flex-col justify-between
    <%= local_assigns[:extra_classes] %>
  "
>
  <div class="flex items-center justify-between mb-2">
    <h2 class="text-lg font-medium"><%= title %></h2>
    <%# arrow + % %>
    <% if delta %>
      <span class="<%= delta.include?('-') ? 'text-red-500' : 'text-green-500' %> flex items-center gap-1">
        <i class="material-symbols-outlined text-sm">
          <%= delta.include?('-') ? 'arrow_downward' : 'arrow_upward' %>
        </i>
        <%= delta.gsub(/[+-]/, '') %>
      </span>
    <% end %>
  </div>

  <p class="text-4xl font-bold mb-4"><%= big_number %></p>

  <% if small_stats %>
    <div class="<%= small_stats.length > 2 ? 'flex flex-col space-y-2' : 'grid grid-cols-2 gap-4' %> border-t pt-4">
      <% small_stats.each do |label, value| %>
        <div class="<%= small_stats.length > 2 ? 'flex justify-between' : '' %>">
          <% if small_stats.length > 2 %>
            <span class="text-sm text-gray-600"><%= label %></span>
            <span class="font-semibold"><%= value %></span>
          <% else %>
            <h3 class="text-sm text-gray-600"><%= label %></h3>
            <p class="text-lg font-semibold"><%= value %></p>
          <% end %>
        </div>
      <% end %>
    </div>
  <% end %>
</div>
